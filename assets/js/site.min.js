(function () { 'use strict'; function setupTheme() { const themeToggle = document.getElementById('theme-toggle'); if (!themeToggle) return; function setTheme(theme) { document.body.classList.remove('theme-light', 'theme-dark'); document.body.classList.add(theme); localStorage.setItem('theme', theme); themeToggle.textContent = theme === 'theme-dark' ? 'üåô Tema Claro' : '‚òÄÔ∏è Tema Escuro'; themeToggle.setAttribute('aria-label', `Mudar para ${theme === 'theme-dark' ? 'tema claro' : 'tema escuro'}`); } const savedTheme = localStorage.getItem('theme'); const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches; const initialTheme = savedTheme || (prefersDark ? 'theme-dark' : 'theme-light'); setTheme(initialTheme); themeToggle.addEventListener('click', () => { const currentTheme = document.body.classList.contains('theme-dark') ? 'theme-dark' : 'theme-light'; setTheme(currentTheme === 'theme-dark' ? 'theme-light' : 'theme-dark'); }); window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => { if (!localStorage.getItem('theme')) { setTheme(e.matches ? 'theme-dark' : 'theme-light'); } }); } async function loadMarkdown(selector, mdPath) { const container = document.querySelector(selector); if (!container) return; try { container.innerHTML = '<div class="loading">Carregando conte√∫do...</div>'; const response = await fetch(mdPath); if (!response.ok) throw new Error(`Failed to load ${mdPath}`); const markdown = await response.text(); if (typeof marked !== 'undefined') { container.innerHTML = `<div class="markdown-content fade-in">${marked.parse(markdown)}</div>`; } else { container.innerHTML = `<div class="markdown-content fade-in"><pre>${markdown}</pre></div>`; } } catch (error) { console.error('Error loading markdown:', error); container.innerHTML = `<div class="error">Erro ao carregar conte√∫do. Por favor, tente novamente.</div>`; } } async function includeHTML(selector, path) { try { const response = await fetch(path); if (!response.ok) throw new Error(`Failed to load ${path}`); const html = await response.text(); document.querySelectorAll(selector).forEach(el => { el.innerHTML = html; }); } catch (error) { console.warn('Template loading error:', error); } } function setupSmoothScroll() { document.querySelectorAll('a[href^="#"]').forEach(anchor => { anchor.addEventListener('click', function (e) { const href = this.getAttribute('href'); if (href === '#') return; e.preventDefault(); const target = document.querySelector(href); if (target) { target.scrollIntoView({ behavior: 'smooth', block: 'start' }); } }); }); } function highlightActiveMenu() { const currentPath = window.location.pathname; document.querySelectorAll('.sidebar-menu a').forEach(link => { const linkPath = new URL(link.href).pathname; if (linkPath === currentPath) { link.classList.add('active'); } else { link.classList.remove('active'); } }); } function setupSidebar() { const sidebarContainer = document.getElementById('sidebar-container'); if (!sidebarContainer) return; const sidebarHTML = ` <aside class="sidebar" style="flex:0 0 360px;"> <img src="/images/avatar.webp" alt="Foto de Eduardo Barreto" class="sidebar-avatar" loading="lazy"> <h2 class="sidebar-name">Eduardo Barreto</h2> <p class="sidebar-bio">Desenvolvedor | Engenheiro | DevOps</p> <ul class="sidebar-info"> <li><i class="fa fa-map-marker"></i> Brasil</li> <li><i class="fa fa-envelope"></i> edubarret0dev@gmail.com</li> <li><i class="fa fa-link"></i> <a href="https://github.com/edubarret0dev" target="_blank">github.com/edubarret0dev</a></li> </ul> <ul class="sidebar-social"> <li><a href="mailto:edubarret0dev@gmail.com" target="_blank" title="Email"><i class="fa fa-envelope"></i></a></li> <li><a href="https://x.com/eduBarret0" target="_blank" title="X"><i class="fa fa-times"></i></a></li> <li><a href="https://www.instagram.com/engedubarreto/?hl=pt-br" target="_blank" title="Instagram"><i class="fa fa-instagram"></i></a></li> <li><a href="https://www.facebook.com/eduardo.barreto.9277583" target="_blank" title="Facebook"><i class="fa fa-facebook"></i></a></li> <li><a href="https://www.youtube.com/channel/UCKlvq21jNbikjJzZiufVNwQ?view_as=subscriber" target="_blank" title="Youtube"><i class="fa fa-youtube"></i></a></li> <li><a href="https://www.linkedin.com/in/eduardo-barreto-244575b4/" target="_blank" title="Linkedin"><i class="fa fa-linkedin"></i></a></li> </ul> <div class="sidebar-achievements" style="display:flex;gap:1rem;justify-content:center;margin:1rem 0;"> <span class="badge badge-blue"><i class="fa fa-trophy"></i> Destaque</span> <span class="badge badge-purple"><i class="fa fa-star"></i> Pro</span> </div> <nav class="sidebar-menu"> <a href="/index.html">In√≠cio</a> <a href="/pages/projetos.html">Projetos</a> <a href="/pages/artigos.html">Artigos</a> <a href="/pages/servicos.html">Servi√ßos</a> <a href="/pages/downloads.html">Downloads</a> </nav> <button id="theme-toggle" aria-label="Alternar tema">üåô Mudar tema</button> </aside> `; sidebarContainer.innerHTML = sidebarHTML; setupTheme(); highlightActiveMenu(); } document.addEventListener('DOMContentLoaded', function () { setupSidebar(); if (!document.getElementById('sidebar-container')) { setupTheme(); } includeHTML('[data-include="header"]', '/templates/header.html'); includeHTML('[data-include="footer"]', '/templates/footer.html'); const mdAttribute = document.body.getAttribute('data-md'); if (mdAttribute) { loadMarkdown('#content', mdAttribute); } setupSmoothScroll(); highlightActiveMenu(); const mainContent = document.querySelector('.main-content'); if (mainContent) { mainContent.classList.add('fade-in'); } }); window.siteUtils = { loadMarkdown, includeHTML }; })();